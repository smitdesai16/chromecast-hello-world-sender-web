import{r as i,R as W,j as z}from"./secondPulse-twdrFjwE.js";import{j as m,T as Y,a as X,u as D,m as q,_ as G,b as J,g as Q,c as Z}from"./useTheme-lPzeVshy.js";import{u as ee,a as te,b as T,d as E,e as S,f as w,g as x,i as R,j as se}from"./healthCheckReducer-d-_SjTXl.js";import{u as oe,a as ne}from"./react-redux-CVnWO5wB.js";import{C as re,c as ie,u as ce,a as ue}from"./CustomStyleHooksContext-3NPNEECn.js";import"./index-32EXczx1.js";import"./firstPulse-A5rOS8xp.js";function ae(s,e){if(e){const t=Object.keys(e).reduce((o,n)=>`${o}--${n}: ${e[n]}; `,"");return`${s} { ${t} }`}return`${s} {}`}const de={current:0},le=i.createContext(void 0);function fe(){var s;return(s=i.useContext(le))!==null&&s!==void 0?s:de}const F=i.createContext(void 0);F.Provider;function me(){return i.useContext(F)||""}function ve(s="fui-",e){const t=fe(),o=me(),n=W.useId;if(n){const r=n(),d=i.useMemo(()=>r.replace(/:/g,""),[r]);return e||`${o}${s}${d}`}return i.useMemo(()=>e||`${o}${s}${++t.current}`,[o,s,e,t])}function he(...s){const e=i.useCallback(t=>{e.current=t;for(const o of s)typeof o=="function"?o(t):o&&(o.current=t)},[...s]);return e}const N=i.createContext(void 0),_e=N.Provider,ge=i.createContext(void 0),ye=ge.Provider,be=i.createContext(void 0),pe=be.Provider,M=i.createContext(void 0),Ce={targetDocument:typeof document=="object"?document:void 0,dir:"ltr"},ke=M.Provider;function L(){var s;return(s=i.useContext(M))!==null&&s!==void 0?s:Ce}const V=i.createContext(void 0),Te=V.Provider;function Ee(){var s;return(s=i.useContext(V))!==null&&s!==void 0?s:{}}function P(s,e){var t;const o=s;var n;return!!(!(o==null||(t=o.ownerDocument)===null||t===void 0)&&t.defaultView&&o instanceof o.ownerDocument.defaultView[(n=e==null?void 0:e.constructorName)!==null&&n!==void 0?n:"HTMLElement"])}const Se=i.createContext(void 0),we=Se.Provider,xe=(s,e)=>m(ke,{value:e.provider,children:m(_e,{value:e.theme,children:m(ye,{value:e.themeClassName,children:m(re,{value:e.customStyleHooks_unstable,children:m(pe,{value:e.tooltip,children:m(Y,{dir:e.textDirection,children:m(we,{value:e.iconDirection,children:m(Te,{value:e.overrides_unstable,children:X(s.root,{children:[ie()?null:m("style",{dangerouslySetInnerHTML:{__html:s.serverStyleProps.cssRule},...s.serverStyleProps.attributes}),s.root.children]})})})})})})})})});/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */const Re=typeof WeakRef<"u";class A{constructor(e){Re&&typeof e=="object"?this._weakRef=new WeakRef(e):this._instance=e}deref(){var e,t,o;let n;return this._weakRef?(n=(e=this._weakRef)===null||e===void 0?void 0:e.deref(),n||delete this._weakRef):(n=this._instance,!((o=(t=n)===null||t===void 0?void 0:t.isDisposed)===null||o===void 0)&&o.call(t)&&delete this._instance),n}}/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */const h="keyborg:focusin";function Pe(s){const e=s.HTMLElement,t=e.prototype.focus;let o=!1;return e.prototype.focus=function(){o=!0},s.document.createElement("button").focus(),e.prototype.focus=t,o}let y=!1;function Ie(s){const e=s;y||(y=Pe(e));const t=e.HTMLElement.prototype.focus;if(t.__keyborgNativeFocus)return;e.HTMLElement.prototype.focus=d;const o=a=>{const c=a.relatedTarget,u=a.currentTarget;u.contains(c)||(u.removeEventListener("focusin",n),u.removeEventListener("focusout",o))},n=a=>{var c;let u=a.target;if(!u)return;u.shadowRoot&&(u.shadowRoot.addEventListener("focusin",n),u.shadowRoot.addEventListener("focusout",o),u=a.composedPath()[0]);const l={relatedTarget:a.relatedTarget||void 0},v=new CustomEvent(h,{cancelable:!0,bubbles:!0,composed:!0,detail:l});v.details=l,(y||r.lastFocusedProgrammatically)&&(l.isFocusedProgrammatically=u===((c=r.lastFocusedProgrammatically)===null||c===void 0?void 0:c.deref()),r.lastFocusedProgrammatically=void 0),u.dispatchEvent(v)},r=e.__keyborgData={focusInHandler:n};e.document.addEventListener("focusin",e.__keyborgData.focusInHandler,!0);function d(){const a=e.__keyborgData;return a&&(a.lastFocusedProgrammatically=new A(this)),t.apply(this,arguments)}d.__keyborgNativeFocus=t}function De(s){const e=s,t=e.HTMLElement.prototype,o=t.focus.__keyborgNativeFocus,n=e.__keyborgData;n&&(e.document.removeEventListener("focusin",n.focusInHandler,!0),delete e.__keyborgData),o&&(t.focus=o)}/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */const Fe=500;let K=0;class Ne{constructor(){this.__keyborgCoreRefs={},this._isNavigatingWithKeyboard=!1}add(e){const t=e.id;t in this.__keyborgCoreRefs||(this.__keyborgCoreRefs[t]=new A(e))}remove(e){delete this.__keyborgCoreRefs[e],Object.keys(this.__keyborgCoreRefs).length===0&&(this._isNavigatingWithKeyboard=!1)}setVal(e){if(this._isNavigatingWithKeyboard!==e){this._isNavigatingWithKeyboard=e;for(const t of Object.keys(this.__keyborgCoreRefs)){const n=this.__keyborgCoreRefs[t].deref();n?n.update(e):this.remove(t)}}}getVal(){return this._isNavigatingWithKeyboard}}const f=new Ne;class Me{constructor(e,t){this._onFocusIn=n=>{if(this._isMouseUsedTimer||f.getVal())return;const r=n.detail;r.relatedTarget&&(r.isFocusedProgrammatically||r.isFocusedProgrammatically===void 0||f.setVal(!0))},this._onMouseDown=n=>{if(n.buttons===0||n.clientX===0&&n.clientY===0&&n.screenX===0&&n.screenY===0)return;const r=this._win;r&&(this._isMouseUsedTimer&&r.clearTimeout(this._isMouseUsedTimer),this._isMouseUsedTimer=r.setTimeout(()=>{delete this._isMouseUsedTimer},1e3)),f.setVal(!1)},this._onKeyDown=n=>{var r,d;const a=f.getVal(),c=n.keyCode,u=this._triggerKeys;if(!a&&(!u||u.has(c))){const l=(r=this._win)===null||r===void 0?void 0:r.document.activeElement;if(l&&(l.tagName==="INPUT"||l.tagName==="TEXTAREA"||l.contentEditable==="true"))return;f.setVal(!0)}else a&&(!((d=this._dismissKeys)===null||d===void 0)&&d.has(c))&&this._scheduleDismiss()},this.id="c"+ ++K,this._win=e;const o=e.document;if(t){const n=t.triggerKeys,r=t.dismissKeys;n!=null&&n.length&&(this._triggerKeys=new Set(n)),r!=null&&r.length&&(this._dismissKeys=new Set(r))}o.addEventListener(h,this._onFocusIn,!0),o.addEventListener("mousedown",this._onMouseDown,!0),e.addEventListener("keydown",this._onKeyDown,!0),Ie(e),f.add(this)}dispose(){const e=this._win;if(e){this._isMouseUsedTimer&&(e.clearTimeout(this._isMouseUsedTimer),this._isMouseUsedTimer=void 0),this._dismissTimer&&(e.clearTimeout(this._dismissTimer),this._dismissTimer=void 0),De(e);const t=e.document;t.removeEventListener(h,this._onFocusIn,!0),t.removeEventListener("mousedown",this._onMouseDown,!0),e.removeEventListener("keydown",this._onKeyDown,!0),delete this._win,f.remove(this.id)}}isDisposed(){return!!this._win}update(e){var t,o;const n=(o=(t=this._win)===null||t===void 0?void 0:t.__keyborg)===null||o===void 0?void 0:o.refs;if(n)for(const r of Object.keys(n))_.update(n[r],e)}_scheduleDismiss(){const e=this._win;if(e){this._dismissTimer&&(e.clearTimeout(this._dismissTimer),this._dismissTimer=void 0);const t=e.document.activeElement;this._dismissTimer=e.setTimeout(()=>{this._dismissTimer=void 0;const o=e.document.activeElement;t&&o&&t===o&&f.setVal(!1)},Fe)}}}class _{constructor(e,t){this._cb=[],this._id="k"+ ++K,this._win=e;const o=e.__keyborg;o?(this._core=o.core,o.refs[this._id]=this):(this._core=new Me(e,t),e.__keyborg={core:this._core,refs:{[this._id]:this}})}static create(e,t){return new _(e,t)}static dispose(e){e.dispose()}static update(e,t){e._cb.forEach(o=>o(t))}dispose(){var e;const t=(e=this._win)===null||e===void 0?void 0:e.__keyborg;t!=null&&t.refs[this._id]&&(delete t.refs[this._id],Object.keys(t.refs).length===0&&(t.core.dispose(),delete this._win.__keyborg)),this._cb=[],delete this._core,delete this._win}isNavigatingWithKeyboard(){return f.getVal()}subscribe(e){this._cb.push(e)}unsubscribe(e){const t=this._cb.indexOf(e);t>=0&&this._cb.splice(t,1)}setVal(e){f.setVal(e)}}function Le(s,e){return _.create(s,e)}function Ve(s){_.dispose(s)}const I="data-fui-focus-visible";function Ae(s,e){if(O(s))return()=>{};const t={current:void 0},o=Le(e);function n(c){o.isNavigatingWithKeyboard()&&P(c)&&(t.current=c,c.setAttribute(I,""))}function r(){t.current&&(t.current.removeAttribute(I),t.current=void 0)}o.subscribe(c=>{c||r()});const d=c=>{r();const u=c.composedPath()[0];n(u)},a=c=>{(!c.relatedTarget||P(c.relatedTarget)&&!s.contains(c.relatedTarget))&&r()};return s.addEventListener(h,d),s.addEventListener("focusout",a),s.focusVisible=!0,n(e.document.activeElement),()=>{r(),s.removeEventListener(h,d),s.removeEventListener("focusout",a),delete s.focusVisible,Ve(o)}}function O(s){return s?s.focusVisible?!0:O(s==null?void 0:s.parentElement):!1}function Ke(s={}){const e=L(),t=i.useRef(null);var o;const n=(o=s.targetDocument)!==null&&o!==void 0?o:e.targetDocument;return i.useEffect(()=>{if(n!=null&&n.defaultView&&t.current)return Ae(t.current,n.defaultView)},[t,n]),t}const H={root:"fui-FluentProvider"},Oe=G({root:{sj55zd:"f19n0e5",De3pzq:"fxugw4r",fsow6f:["f1o700av","fes3tcz"],Bahqtrf:"fk6fouc",Be2twd7:"fkhj508",Bhrd7zp:"figsok6",Bg96gwp:"f1i3iumi"}},{d:[".f19n0e5{color:var(--colorNeutralForeground1);}",".fxugw4r{background-color:var(--colorNeutralBackground1);}",".f1o700av{text-align:left;}",".fes3tcz{text-align:right;}",".fk6fouc{font-family:var(--fontFamilyBase);}",".fkhj508{font-size:var(--fontSizeBase300);}",".figsok6{font-weight:var(--fontWeightRegular);}",".f1i3iumi{line-height:var(--lineHeightBase300);}"]}),He=s=>{const e=D(),t=Oe({dir:s.dir,renderer:e});return s.root.className=q(H.root,s.themeClassName,t.root,s.root.className),s},je=i.useInsertionEffect?i.useInsertionEffect:ce,Be=(s,e)=>{if(!s)return;const t=s.createElement("style");return Object.keys(e).forEach(o=>{t.setAttribute(o,e[o])}),s.head.appendChild(t),t},$e=(s,e)=>{const t=s.sheet;t&&(t.cssRules.length>0&&t.deleteRule(0),t.insertRule(e,0))},Ue=s=>{const{targetDocument:e,theme:t,rendererAttributes:o}=s,n=i.useRef(),r=ve(H.root),d=o,a=i.useMemo(()=>ae(`.${r}`,t),[t,r]);return We(e,r),je(()=>{const c=e==null?void 0:e.getElementById(r);return c?n.current=c:(n.current=Be(e,{...d,id:r}),n.current&&$e(n.current,a)),()=>{var u;(u=n.current)===null||u===void 0||u.remove()}},[r,e,a,d]),{styleTagId:r,rule:a}};function We(s,e){i.useState(()=>{if(!s)return;const t=s.getElementById(e);t&&s.head.append(t)})}const ze={},Ye=(s,e)=>{const t=L(),o=Xe(),n=Ee(),r=i.useContext(ue)||ze,{applyStylesToPortals:d=!0,customStyleHooks_unstable:a,dir:c=t.dir,targetDocument:u=t.targetDocument,theme:l,overrides_unstable:v={}}=s,p=b(o,l),B=b(n,v),$=b(r,a),C=D();var g;const{styleTagId:k,rule:U}=Ue({theme:p,targetDocument:u,rendererAttributes:(g=C.styleElementAttributes)!==null&&g!==void 0?g:{}});return{applyStylesToPortals:d,customStyleHooks_unstable:$,dir:c,targetDocument:u,theme:p,overrides_unstable:B,themeClassName:k,components:{root:"div"},root:J(Q("div",{...s,dir:c,ref:he(e,Ke({targetDocument:u}))}),{elementType:"div"}),serverStyleProps:{cssRule:U,attributes:{...C.styleElementAttributes,id:k}}}};function b(s,e){return s&&e?{...s,...e}:s||e}function Xe(){return i.useContext(N)}function qe(s){const{applyStylesToPortals:e,customStyleHooks_unstable:t,dir:o,root:n,targetDocument:r,theme:d,themeClassName:a,overrides_unstable:c}=s,u=i.useMemo(()=>({dir:o,targetDocument:r}),[o,r]),[l]=i.useState(()=>({})),v=i.useMemo(()=>({textDirection:o}),[o]);return{customStyleHooks_unstable:t,overrides_unstable:c,provider:u,textDirection:o,iconDirection:v,tooltip:l,theme:d,themeClassName:e?n.className:a}}const j=i.forwardRef((s,e)=>{const t=Ye(s,e);He(t);const o=qe(t);return xe(t,o)});j.displayName="FluentProvider";function ot({children:s}){const e=oe(),t=Z(),o=ne(n=>n.applicationDetail.sessionId);return i.useEffect(()=>{document.body.style.backgroundColor=t.colorNeutralBackground1}),i.useEffect(()=>{setInterval(function(){const n=window.cast.framework.CastContext.getInstance();e(ee(n.getCastState())),e(te(n.getSessionState()));const r=n.getCurrentSession();r?(e(T(r.getApplicationStatus())),e(E(r.getSessionId())),e(S(r.getSessionObj().appId)),e(w(r.getSessionObj().displayName)),e(x(r.getVolume())),e(R(r.isMute())),r.sendMessage("urn:x-cast:io.smitdesai16.github.health-check",{message:(Math.random()+1).toString(36).substring(7)})):(e(T("")),e(E("")),e(S("")),e(w("")),e(x(0)),e(R(!1)))},100)}),i.useEffect(()=>{o&&window.cast.framework.CastContext.getInstance().getCurrentSession().addMessageListener("urn:x-cast:io.smitdesai16.github.health-check",function(){e(se(new Date().toISOString()))})}),z.jsx(j,{theme:t,children:s})}export{ot as default};
